(function(t){function e(e){for(var r,i,n=e[0],c=e[1],l=e[2],d=0,_=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&_.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(_.length)_.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,n=1;n<a.length;n++){var c=a[n];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},s={app:0},o=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-app/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{display:"none"}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("symbol",{attrs:{id:"icon-arrow-left"}},[a("path",{attrs:{fill:"none",d:"M6.319 11.034l-5-5 5-5",stroke:"#222"}})]),a("symbol",{attrs:{id:"icon-arrow-right"}},[a("path",{attrs:{fill:"none",d:"M1.25 11.034l5-5-5-5",stroke:"#222"}})]),a("symbol",{attrs:{id:"icon-arrow",viewBox:"0 0 10 6"}},[a("path",{attrs:{d:"M1 1l4 4 4-4",stroke:"#000","stroke-linecap":"round"}})]),a("symbol",{attrs:{id:"icon-cart",viewBox:"0 0 19 24"}},[a("path",{attrs:{fill:"#000","fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.895.752c-2.6 0-4.779 1.955-4.779 4.45v.684H4.094a2.5 2.5 0 00-2.497 2.372l-.65 12.686a2.5 2.5 0 002.496 2.628h12.903a2.5 2.5 0 002.497-2.628l-.65-12.686a2.5 2.5 0 00-2.497-2.372h-1.023v-.685c0-2.494-2.178-4.45-4.778-4.45zm4.778 8.362a.854.854 0 01-.5 1.55.856.856 0 01-.5-1.55V6.886H6.116v2.228a.855.855 0 01-.5 1.55.856.856 0 01-.5-1.55V6.886H4.094a1.5 1.5 0 00-1.499 1.423l-.65 12.686a1.5 1.5 0 001.498 1.577h12.903a1.5 1.5 0 001.498-1.577l-.65-12.686a1.5 1.5 0 00-1.498-1.423h-1.023v2.228zm-1-3.228v-.685c0-1.868-1.653-3.45-3.778-3.45-2.126 0-3.779 1.582-3.779 3.45v.685h7.557z"}})]),a("symbol",{attrs:{id:"icon-close",viewBox:"0 0 18 18"}},[a("path",{attrs:{d:"M17 1L1 17m16 0L1 1",stroke:"#9D9D9D","stroke-width":".8"}})]),a("symbol",{attrs:{id:"icon-facebook",viewBox:"0 0 17 17"}},[a("path",{attrs:{d:"M15.454 0H1.545C.692 0 0 .692 0 1.545v13.91C0 16.308.692 17 1.545 17h7.728v-6.954H6.955V7.727h2.318V6.482c0-2.356 1.148-3.391 3.107-3.391.938 0 1.434.07 1.669.101V5.41h-1.336c-.831 0-1.122.439-1.122 1.328v.99h2.437l-.33 2.319H11.59V17h3.864c.853 0 1.545-.692 1.545-1.546V1.545A1.544 1.544 0 0015.454 0z"}})]),a("symbol",{attrs:{id:"icon-insta",viewBox:"0 0 17 17"}},[a("path",{attrs:{d:"M4.957 0A4.964 4.964 0 000 4.96v7.083A4.964 4.964 0 004.96 17h7.083A4.964 4.964 0 0017 12.04V4.957A4.964 4.964 0 0012.04 0H4.957zm8.501 2.833a.709.709 0 110 1.418.709.709 0 010-1.418zM8.5 4.25a4.254 4.254 0 014.25 4.25 4.254 4.254 0 01-4.25 4.25A4.254 4.254 0 014.25 8.5 4.254 4.254 0 018.5 4.25zm0 1.417a2.833 2.833 0 100 5.666 2.833 2.833 0 000-5.666z"}})]),a("symbol",{attrs:{id:"icon-minus",viewBox:"0 0 9 3"}},[a("path",{attrs:{d:"M8.287 2.574H.7V.765h7.587v1.809z"}})]),a("symbol",{attrs:{id:"icon-plus",viewBox:"0 0 12 12"}},[a("path",{attrs:{d:"M6.524 11.086h-1.43v-4.51H.54V5.102h4.554V.57h1.43v4.532h4.554v1.474H6.524v4.51z"}})]),a("symbol",{attrs:{id:"icon-search",viewBox:"0 0 20 20"}},[a("path",{attrs:{"clip-rule":"evenodd",d:"M13.224 3.097A7.16 7.16 0 113.097 13.224 7.16 7.16 0 0113.224 3.097zm.728 10.813a8.16 8.16 0 10-.042.042l-.7.7 5.049 5.05a1.02 1.02 0 101.442-1.443l-5.049-5.05-.7.7z"}})]),a("symbol",{attrs:{id:"icon-telegram",viewBox:"0 0 19 17"}},[a("path",{attrs:{d:"M.393 7.855l4.324 1.614 1.674 5.383a.509.509 0 00.809.243l2.41-1.965a.72.72 0 01.877-.024l4.348 3.156a.51.51 0 00.798-.308L18.818.634a.51.51 0 00-.682-.58L.388 6.902a.51.51 0 00.005.954zm5.729.755l8.451-5.206c.152-.093.308.112.178.233l-6.975 6.484a1.446 1.446 0 00-.448.865l-.238 1.76c-.031.236-.362.26-.426.032L5.75 9.567a.851.851 0 01.372-.957z"}})]),a("symbol",{attrs:{id:"icon-twitter",viewBox:"0 0 18 15"}},[a("path",{attrs:{d:"M17.062 2.007a7.009 7.009 0 01-2.01.55A3.51 3.51 0 0016.59.62a6.989 6.989 0 01-2.222.85 3.5 3.5 0 00-5.965 3.194 9.94 9.94 0 01-7.215-3.659c-.3.519-.473 1.12-.473 1.76a3.5 3.5 0 001.557 2.914 3.492 3.492 0 01-1.586-.438v.045a3.502 3.502 0 002.808 3.432 3.526 3.526 0 01-1.58.06 3.502 3.502 0 003.27 2.43A7.025 7.025 0 010 12.659a9.9 9.9 0 005.365 1.574c6.44 0 9.96-5.334 9.96-9.96 0-.15-.004-.302-.01-.452a7.116 7.116 0 001.745-1.81l.002-.003z"}})]),a("symbol",{attrs:{id:"icon-vk",viewBox:"0 0 20 11"}},[a("path",{attrs:{"clip-rule":"evenodd",d:"M19.541.745c.14-.43 0-.745-.662-.745h-2.188c-.556 0-.812.273-.951.573 0 0-1.113 2.512-2.69 4.143-.51.473-.741.623-1.02.623-.138 0-.347-.15-.347-.58V.745c0-.515-.154-.745-.618-.745H7.627c-.348 0-.557.24-.557.466 0 .488.788.6.87 1.975v2.984c0 .654-.128.773-.406.773-.742 0-2.546-2.523-3.617-5.41C3.707.227 3.497 0 2.938 0H.75C.125 0 0 .273 0 .573c0 .537.742 3.199 3.454 6.72C5.262 9.696 7.809 11 10.127 11c1.391 0 1.563-.29 1.563-.788V8.395c0-.58.132-.695.572-.695.325 0 .881.15 2.18 1.31 1.483 1.374 1.727 1.99 2.562 1.99h2.188c.625 0 .938-.29.757-.86-.197-.57-.905-1.396-1.845-2.375-.51-.558-1.275-1.16-1.507-1.46-.324-.387-.232-.558 0-.902 0 0 2.666-3.477 2.944-4.658z"}})])])]),a("header",{staticClass:"header container"},[a("div",{staticClass:"header__wrapper"},[a("router-link",{staticClass:"header__info",attrs:{to:{name:"main"}}},[t._v("Каталог")]),a("router-link",{staticClass:"header__logo",attrs:{to:{name:"main"}}},[a("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})]),a("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),a("CartIndicator")],1)]),a("router-view"),a("footer",{staticClass:"footer container"},[a("div",{staticClass:"footer__wrapper"},[t._m(0),a("ul",{staticClass:"footer__social social"},[a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[a("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[a("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[a("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[a("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[a("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),a("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(1),a("span",{staticClass:"footer__copyright"},[t._v(" © 2020 Moire ")])])])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"footer__links"},[a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Каталог ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@technozavrrr.com"}},[t._v(" hi@technozavrrr.com ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])]),a("li",[a("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"footer__data"},[a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],i=a("5530"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"header__cart",attrs:{to:{name:"cart"},"aria-label":"Корзина с товарами"}},[a("svg",{attrs:{width:"19",height:"24"}},[a("use",{attrs:{"xlink:href":"#icon-cart"}})]),a("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.amountProducts()))])])},c=[],l=(a("d3b7"),a("159b"),{methods:{amountProducts:function(){var t=0;return this.$store.state.cartProducts.forEach((function(e){t+=e.amount})),t}}}),u=l,d=a("2877"),_=Object(d["a"])(u,n,c,!1,null,null,null),m=_.exports,p=a("2f62"),f={created:function(){var t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:Object(i["a"])(Object(i["a"])({},Object(p["b"])(["loadCart"])),Object(p["d"])(["updateUserAccessKey"])),components:{CartIndicator:m}},v=f,h=Object(d["a"])(v,s,o,!1,null,null,null),C=h.exports,b=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Каталог ")]),a("span",{staticClass:"content__info"},[t._v(" "+t._s(t.products.length)+" товара ")])])]),a("div",{staticClass:"content__catalog"},[a("ProductFilter",{attrs:{"price-from":t.filterPriceFrom,"price-to":t.filterPriceTo,"category-id":t.filterCategoryId,"color-id":t.filterColorId,"season-id":t.filterSeasonId,"material-id":t.filterMaterialId},on:{"update:priceFrom":function(e){t.filterPriceFrom=e},"update:price-from":function(e){t.filterPriceFrom=e},"update:priceTo":function(e){t.filterPriceTo=e},"update:price-to":function(e){t.filterPriceTo=e},"update:categoryId":function(e){t.filterCategoryId=e},"update:category-id":function(e){t.filterCategoryId=e},"update:colorId":function(e){t.filterColorId=e},"update:color-id":function(e){t.filterColorId=e},"update:seasonId":function(e){t.filterSeasonId=e},"update:season-id":function(e){t.filterSeasonId=e},"update:materialId":function(e){t.filterMaterialId=e},"update:material-id":function(e){t.filterMaterialId=e}}}),a("section",{staticClass:"catalog"},[1==t.productsLoading?a("div",[t._m(0)]):t._e(),1==t.productsLoadingFailed?a("div",[t._v("Произошла ошибка"),a("button",{on:{click:function(e){return e.preventDefault(),t.loadProducts.apply(null,arguments)}}},[t._v("Попробовать еще раз")])]):t._e(),a("ProductList",{attrs:{products:t.products}}),a("BasePagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"cube-loader"}},[a("div",{staticClass:"caption"},[a("div",{staticClass:"cube-loader"},[a("div",{staticClass:"cube loader-1"}),a("div",{staticClass:"cube loader-2"}),a("div",{staticClass:"cube loader-4"}),a("div",{staticClass:"cube loader-3"})])])])}],k=(a("d81d"),a("bc3a")),I=a.n(k),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"filter"},[a("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цена")]),a("label",{staticClass:"form__label form__label--price"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.currentPriceFrom},on:{input:function(e){e.target.composing||(t.currentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"form__value"},[t._v("От")])]),a("label",{staticClass:"form__label form__label--price"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.currentPriceTo},on:{input:function(e){e.target.composing||(t.currentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"form__value"},[t._v("До")])])]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Категория")]),a("label",{staticClass:"form__label form__label--select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentCategoryId,expression:"currentCategoryId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.currentCategoryId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0",hidden:""}},[t._v("Все категории")]),t._l(t.categories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])}))],2)])]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цвет")]),a("ul",{staticClass:"colors"},t._l(t.colors,(function(e){return a("li",{key:e.id,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentColorId,expression:"currentColorId",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"checkbox",name:"color"},domProps:{value:e.id,checked:Array.isArray(t.currentColorId)?t._i(t.currentColorId,e.id)>-1:t.currentColorId},on:{change:function(a){var r=t.currentColorId,s=a.target,o=!!s.checked;if(Array.isArray(r)){var i=t._n(e.id),n=t._i(r,i);s.checked?n<0&&(t.currentColorId=r.concat([i])):n>-1&&(t.currentColorId=r.slice(0,n).concat(r.slice(n+1)))}else t.currentColorId=o}}}),a("span",{staticClass:"colors__value",style:"background-color: "+e.code})])])})),0)]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Материал")]),t._l(t.materials,(function(e){return a("ul",{key:e.id,staticClass:"check-list"},[a("li",{staticClass:"check-list__item"},[a("label",{staticClass:"check-list__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentMaterials,expression:"currentMaterials"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material"},domProps:{value:e.id,checked:Array.isArray(t.currentMaterials)?t._i(t.currentMaterials,e.id)>-1:t.currentMaterials},on:{change:function(a){var r=t.currentMaterials,s=a.target,o=!!s.checked;if(Array.isArray(r)){var i=e.id,n=t._i(r,i);s.checked?n<0&&(t.currentMaterials=r.concat([i])):n>-1&&(t.currentMaterials=r.slice(0,n).concat(r.slice(n+1)))}else t.currentMaterials=o}}}),a("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),a("span",[t._v("("+t._s(e.productsCount)+")")])])])])])}))],2),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),t._l(t.seasons,(function(e){return a("ul",{key:e.id,staticClass:"check-list"},[a("li",{staticClass:"check-list__item"},[a("label",{staticClass:"check-list__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSeasons,expression:"currentSeasons"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection"},domProps:{value:e.id,checked:Array.isArray(t.currentSeasons)?t._i(t.currentSeasons,e.id)>-1:t.currentSeasons},on:{change:function(a){var r=t.currentSeasons,s=a.target,o=!!s.checked;if(Array.isArray(r)){var i=e.id,n=t._i(r,i);s.checked?n<0&&(t.currentSeasons=r.concat([i])):n>-1&&(t.currentSeasons=r.slice(0,n).concat(r.slice(n+1)))}else t.currentSeasons=o}}}),a("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),a("span",[t._v("("+t._s(e.productsCount)+")")])])])])])}))],2),a("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),t.btnReset?a("button",{staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(" Сбросить ")]):t._e()])])},D=[],w="https://vue-moire.skillbox.cc",T="https://www.lionstroy.ru/published/publicdata/U70619SHOP/attachments/SC/products_pictures/nophoto.png",x={data:function(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:[],currentMaterials:[],currentSeasons:[],categoriesData:null,colorsData:null,materialsData:null,seasonData:null,btnReset:!1}},props:["priceFrom","priceTo","categoryId","colorId","seasonId","materialId"],computed:{categories:function(){return this.categoriesData?this.categoriesData.items:[]},colors:function(){return this.colorsData?this.colorsData.items:[]},seasons:function(){return this.seasonData?this.seasonData.items:[]},materials:function(){return this.materialsData?this.materialsData.items:[]},btnResetComp:function(){return 0!=this.currentPriceFrom||0!=this.currentPriceTo||0!=this.currentCategoryId||0!=this.currentColorId.length||0!=this.currentMaterials.length||0!=this.currentSeasons.length}},methods:{submit:function(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId),this.$emit("update:seasonId",this.currentMaterials),this.$emit("update:materialId",this.currentSeasons)},reset:function(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",[]),this.$emit("update:seasonId",[]),this.$emit("update:materialId",[]),this.currentPriceFrom=0,this.currentPriceTo=0,this.currentCategoryId=0,this.currentColorId=[],this.currentMaterials=[],this.currentSeasons=[]},loadParams:function(){var t=this;I.a.get(w+"/api/productCategories").then((function(e){return t.categoriesData=e.data})),I.a.get(w+"/api/colors").then((function(e){return t.colorsData=e.data})),I.a.get(w+"/api/seasons").then((function(e){return t.seasonData=e.data})),I.a.get(w+"/api/materials").then((function(e){return t.materialsData=e.data}))}},watch:{currentPriceFrom:function(){this.btnReset=this.btnResetComp},currentPriceTo:function(){this.btnReset=this.btnResetComp},currentCategoryId:function(){this.btnReset=this.btnResetComp},currentColorId:function(){this.btnReset=this.btnResetComp},currentMaterials:function(){this.btnReset=this.btnResetComp},currentSeasons:function(){this.btnReset=this.btnResetComp}},created:function(){this.loadParams()}},O=x,A=Object(d["a"])(O,P,D,!1,null,null,null),$=A.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return a("ProductItem",{key:t.id,attrs:{product:t}})})),1)},E=[],j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"catalog__item"},[a("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.product.id}}}},[a("img",{attrs:{src:t.getImage[t.currentColor],alt:"Название товара"}})]),a("h3",{staticClass:"catalog__title"},[a("a",{attrs:{href:"#"}},[t._v(" "+t._s(t.product.title)+" ")])]),a("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t.product.price)+" ₽ ")]),a("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(e,r){return a("li",{key:r,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentColor,expression:"currentColor"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-1"},domProps:{value:r,checked:t._q(t.currentColor,r)},on:{change:function(e){t.currentColor=r}}}),a("span",{staticClass:"colors__value",class:{"checked-color":r==t.currentColor},style:"background-color:"+e.color.code})])])})),0)],1)},M=[],z={data:function(){return{currentColor:0}},props:["product","images"],computed:{getImage:function(){var t=this.product.colors.map((function(t){return t.gallery?t.gallery[0].file.url:T}));return t}}},F=z,L=Object(d["a"])(F,j,M,!1,null,null,null),K=L.exports,N={components:{ProductItem:K},props:["products"]},R=N,H=Object(d["a"])(R,S,E,!1,null,null,null),B=H.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"catalog__pagination pagination"},[a("li",{staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1===t.page},attrs:{"aria-label":"Предыдущая страница"},on:{click:function(e){return e.preventDefault(),t.prev()}}},[t._v(" < ")])]),t._l(t.pages,(function(e,r){return a("li",{key:r,staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link",class:{"pagination__link--current":e===t.page},on:{click:function(a){return a.preventDefault(),t.paginate(e)}}},[t._v(" "+t._s(e)+" ")])])})),a("li",{staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===t.pages},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(e){return e.preventDefault(),t.next()}}},[t._v(" > ")])])],2)},q=[],U={model:{prop:"page",event:"paginate"},watch:{count:function(){this.$emit("paginate",1)}},props:["page","count","perPage"],computed:{pages:function(){return Math.ceil(this.count/this.perPage)}},methods:{paginate:function(t){this.$emit("paginate",t)},prev:function(){this.$emit("paginate",this.page-1)},next:function(){this.$emit("paginate",this.page+1)}}},G=U,J=Object(d["a"])(G,V,q,!1,null,null,null),Q=J.exports,W={data:function(){return{filterCategoryId:0,filterPriceFrom:0,filterPriceTo:0,filterColorId:[],filterMaterialId:[],filterSeasonId:[],currentColor:1,page:1,productsPerPage:12,productsData:null,productsLoading:!1,productsLoadingFailed:!1}},methods:{loadProducts:function(){var t=this;this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((function(){I.a.get(w+"/api/products",{params:{page:t.page,limit:t.productsPerPage,categoryId:t.filterCategoryId,minPrice:t.filterPriceFrom,maxPrice:t.filterPriceTo,colorIds:t.filterColorId,materialIds:t.filterMaterialId,seasonIds:t.filterSeasonId}}).then((function(e){return t.productsData=e.data})).catch((function(){return t.productsLoadingFailed=!0})).then((function(){return t.productsLoading=!1}))}),1e3)}},computed:{products:function(){return this.productsData?this.productsData.items.map((function(t){for(var e=0;e<t.colors.length;e++)if(null!=t.colors[e].gallery)return Object(i["a"])(Object(i["a"])({},t),{},{image:t.colors[e].gallery[0].file.url})})):[]},images:function(){var t=[];if(this.productsData){t=[];for(var e=0;e<this.products.length;e++){for(var a={img:[]},r=0;r<this.products[e].colors.length;r++)null!=this.products[e].colors[r].gallery&&a.img.push(this.products[e].colors[r].gallery[0].file.url);t.push(a)}}return t},countProducts:function(){return this.productsData?this.productsData.pagination.total:0}},components:{ProductFilter:$,ProductList:B,BasePagination:Q},watch:{page:function(){this.loadProducts()},filterPriceFrom:function(){this.loadProducts()},filterPriceTo:function(){this.loadProducts()},filterCategoryId:function(){this.loadProducts()},filterColorId:function(){this.loadProducts()},filterMaterialId:function(){this.loadProducts()},filterSeasonId:function(){this.loadProducts()}},created:function(){this.loadProducts()}},X=W,Y=Object(d["a"])(X,g,y,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("Страница не найдена")])},et=[],at={},rt=at,st=Object(d["a"])(rt,tt,et,!1,null,null,null),ot=st.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.productData?a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" "+t._s(t.category)+" ")])],1),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product.title)+" ")])])])]),a("section",{staticClass:"item"},[a("div",{staticClass:"item__pics pics"},[a("div",{staticClass:"pics__wrapper"},[a("img",{attrs:{width:"570",height:"570",src:t.images[t.indexColor],alt:"Название товара"}})]),a("ul",{staticClass:"pics__list"},t._l(t.images,(function(e,r){return a("li",{key:r,staticClass:"pics__item"},[a("a",{staticClass:"pics__link",class:{"pics__link--current":r==t.indexColor},on:{click:function(e){e.preventDefault(),t.changeImage(r),t.currentColor=t.product.colors[r].color.id}}},[a("img",{attrs:{width:"98",height:"98",src:e,alt:"Название товара"}})])])})),0)]),a("div",{staticClass:"item__info"},[a("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product.id))]),a("h2",{staticClass:"item__title"},[t._v(" "+t._s(t.product.title)+" ")]),a("div",{staticClass:"item__form"},[a("form",{staticClass:"form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.addToCart.apply(null,arguments)}}},[a("div",{staticClass:"item__row item__row--center"},[a("div",{staticClass:"form__counter"},[a("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){return e.preventDefault(),t.reduceAmount.apply(null,arguments)}}},[a("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-minus"}})])]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productAmount,expression:"productAmount",modifiers:{number:!0}}],attrs:{type:"number",min:"1",name:"count",oninput:"validity.valid||(value='');"},domProps:{value:t.productAmount},on:{input:function(e){e.target.composing||(t.productAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){return e.preventDefault(),t.increaseAmount.apply(null,arguments)}}},[a("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),a("b",{staticClass:"item__price"},[t._v(" "+t._s(t.product.price*t.productAmount)+" ₽ ")])]),a("div",{staticClass:"item__row"},[a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цвет")]),a("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(e,r){return a("li",{key:r,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentColor,expression:"currentColor"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item"},domProps:{value:e.color.id,checked:t._q(t.currentColor,e.color.id)},on:{click:function(e){t.indexColor=r},change:function(a){t.currentColor=e.color.id}}}),a("span",{staticClass:"colors__value",style:"background-color:"+e.color.code})])])})),0)]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Размер")]),a("label",{staticClass:"form__label form__label--small form__label--select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentSize,expression:"currentSize"}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentSize=e.target.multiple?a:a[0]}}},t._l(t.product.sizes,(function(e,r){return a("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.title))])})),0)])])]),a("button",{staticClass:"item__button button button--primery",attrs:{type:"submit"}},[t._v(" В корзину ")]),t.productAdded?a("div",[t._v("Товар добавлен в корзину")]):t._e(),t.productAddSending?a("div",[t._m(1)]):t._e()])])]),a("div",{staticClass:"item__desc"},[a("ul",{staticClass:"tabs"},[a("li",{staticClass:"tabs__item"},[a("a",{staticClass:"tabs__link",class:{"tabs__link--current":0==t.currentTab},on:{click:function(e){return e.preventDefault(),t.changeTab(0)}}},[t._v(" Информация о товаре ")])]),a("li",{staticClass:"tabs__item"},[a("a",{staticClass:"tabs__link",class:{"tabs__link--current":1==t.currentTab},on:{click:function(e){return e.preventDefault(),t.changeTab(1)}}},[t._v(" Доставка и возврат ")])])]),0==t.currentTab?a("div",{staticClass:"item__content"},[a("h3",[t._v("Состав:")]),t._m(2),a("h3",[t._v("Уход:")]),t._m(3)]):t._e(),1==t.currentTab?a("div",{staticClass:"item__content"},[a("h3",[t._v("Доставка:")]),t._m(4),a("h3",[t._v("Возврат:")]),t._m(5)]):t._e()])])]):a("main",{staticClass:"content container"},[t._m(0)])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"cube-loader-product"}},[a("div",{staticClass:"caption"},[a("div",{staticClass:"cube-loader"},[a("div",{staticClass:"cube loader-1"}),a("div",{staticClass:"cube loader-2"}),a("div",{staticClass:"cube loader-4"}),a("div",{staticClass:"cube loader-3"})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-add"},[a("div",{staticClass:"load-wrapp"},[a("div",{staticClass:"load-3"},[a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" 60% хлопок"),a("br"),t._v(" 30% полиэстер"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" Машинная стирка при макс. 30ºC короткий отжим"),a("br"),t._v(" Гладить при макс. 110ºC"),a("br"),t._v(" Не использовать машинную сушку"),a("br"),t._v(" Отбеливать запрещено"),a("br"),t._v(" Не подвергать химчистке"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),a("br"),t._v(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),a("br"),t._v(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),a("br"),t._v(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),a("br")])}],ct={data:function(){return{productAmount:1,currentColor:1,indexColor:0,currentSize:1,currentTab:0,productData:null,delivaryData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1}},computed:{product:function(){return this.productData?this.productData:[]},category:function(){return this.productData?this.productData.category.title:[]},images:function(){if(this.productData){var t=this.product.colors.map((function(t){return t.gallery?t.gallery[0].file.url:T}));return t}return[]},color:function(){return this.productData?this.productData.colors[0].color.id:0},size:function(){return this.productData?this.productData.sizes[0].id:0}},methods:Object(i["a"])(Object(i["a"])({},Object(p["b"])(["addProductToCart"])),{},{loadProduct:function(){var t=this;setTimeout((function(){t.productLoading=!0,t.productLoadingFailed=!1,I.a.get(w+"/api/products/".concat(t.$route.params.id)).then((function(e){t.productData=e.data,t.currentColor=t.productData.colors[0].color.id,t.currentSize=t.productData.sizes[0].id})).catch((function(){return t.productLoadingFailed=!0})).then((function(){return t.productLoading=!1}))}),2e3)},changeImage:function(t){this.indexColor=t},increaseAmount:function(){this.productAmount+=1},reduceAmount:function(){1!=this.productAmount&&(this.productAmount-=1)},changeTab:function(t){this.currentTab=t},addToCart:function(){var t=this;this.productAdded=!1,this.productAddSending=!0,this.loadProductTimer=setTimeout((function(){t.addProductToCart({productId:t.product.id,color:t.currentColor,size:t.currentSize,amount:t.productAmount}).then((function(){t.productAdded=!0,t.productAddSending=!1}))}),1e3)}}),watch:{"$route.params.id":{handler:function(){this.loadProduct()},immediate:!0}}},lt=ct,ut=Object(d["a"])(lt,it,nt,!1,null,null,null),dt=ut.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[t._m(0),a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Корзина ")]),a("span",{staticClass:"content__info"},[t._v(" "+t._s(t.amountProducts(t.products))+" товара ")])])]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("ul",{staticClass:"cart__list"},t._l(t.products,(function(t,e){return a("CartItem",{key:e,attrs:{item:t}})})),1)]),a("div",{staticClass:"cart__block"},[a("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),a("p",{staticClass:"cart__price"},[t._v(" Итого: "),a("span",[t._v(t._s(t.totalPrice)+" ₽")])]),a("router-link",{staticClass:"cart__button button button--primery",attrs:{tag:"button",to:{name:"order"},type:"submit"}},[t._v(" Оформить заказ ")])],1)])])])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])])}],pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cart__item product"},[a("div",{staticClass:"product__pic"},[a("img",{attrs:{src:t.getImage(t.item),width:"120",height:"120"}})]),a("h3",{staticClass:"product__title"},[t._v(" "+t._s(t.item.product.title)+" ")]),a("p",{staticClass:"product__info product__info--size"},[t._v(" Размер: "),a("span",[t._v(" "+t._s(t.item.size.title)+" ")])]),a("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),a("span",[a("i",{style:"background-color:"+t.item.color.color.code}),t._v(" "+t._s(t.item.color.color.title)+" ")])]),a("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.item.productId)+" ")]),a("div",{staticClass:"product__counter form__counter"},[a("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){return e.preventDefault(),t.updateCart({productId:t.item.basketItemId,amount:t.item.amount-1})}}},[a("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-minus"}})])]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"number",min:"1",step:"1",oninput:"validity.valid||(value='');",name:"count"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){return e.preventDefault(),t.updateCart({productId:t.item.basketItemId,amount:t.item.amount+1})}}},[a("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),a("b",{staticClass:"product__price"},[t._v(" "+t._s(t.item.product.price*t.item.amount)+" ₽ ")]),a("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(e){return e.preventDefault(),t.deleteProduct({basketItemId:t.item.basketItemId})}}},[a("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-close"}})])])])},ft=[],vt={props:["item"],computed:{amount:{get:function(){return this.item.amount},set:function(t){this.$store.dispatch("updateCartProductAmount",{productId:this.item.basketItemId,amount:t})}}},methods:Object(i["a"])(Object(i["a"])({getImage:function(t){var e="";return e=null!=t.color.gallery?t.color.gallery[0].file.url:"https://www.lionstroy.ru/published/publicdata/U70619SHOP/attachments/SC/products_pictures/nophoto.png",e}},Object(p["b"])({deleteProduct:"deleteCartProduct"})),Object(p["b"])({updateCart:"updateCartProductAmount"}))},ht=vt,Ct=Object(d["a"])(ht,pt,ft,!1,null,null,null),bt=Ct.exports,gt={computed:Object(i["a"])({},Object(p["c"])({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})),methods:{amountProducts:function(t){var e=0;return t.forEach((function(t){e+=t.amount})),e}},components:{CartItem:bt}},yt=gt,kt=Object(d["a"])(yt,_t,mt,!1,null,null,null),It=kt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[t._m(0),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.order.apply(null,arguments)}}},[a("div",{staticClass:"cart__field"},[a("div",{staticClass:"cart__data"},[a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form__input",attrs:{type:"text",name:"name",placeholder:"Введите ваше полное имя"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("ФИО")]),t.formError.name?a("span",{staticClass:"form__error"},[t._v(t._s(t.formError.name))]):t._e()]),a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form__input",attrs:{type:"text",name:"address",placeholder:"Введите ваш адрес"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Адрес доставки")]),t.formError.address?a("span",{staticClass:"form__error"},[t._v(t._s(t.formError.address))]):t._e()]),a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"form__input",attrs:{type:"tel",name:"phone",placeholder:"Введите ваш телефон"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Телефон")]),t.formError.phone?a("span",{staticClass:"form__error"},[t._v(t._s(t.formError.phone))]):t._e()]),a("label",{staticClass:"form__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form__input",attrs:{type:"email",name:"email",placeholder:"Введи ваш Email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Email")]),t.formError.email?a("span",{staticClass:"form__error"},[t._v(t._s(t.formError.email))]):t._e()]),a("label",{staticClass:"form__label"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.comment,expression:"formData.comment"}],staticClass:"form__input form__input--area",attrs:{name:"comments",placeholder:"Ваши пожелания"},domProps:{value:t.formData.comment},on:{input:function(e){e.target.composing||t.$set(t.formData,"comment",e.target.value)}}}),a("span",{staticClass:"form__value"},[t._v("Комментарий к заказу")])])]),a("div",{staticClass:"cart__options"},[a("h3",{staticClass:"cart__title"},[t._v("Доставка")]),a("ul",{staticClass:"cart__options options"},t._l(t.deliveryType,(function(e){return a("li",{key:e.id,staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.deliveryTypeId,expression:"formData.deliveryTypeId"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery"},domProps:{value:e.id,checked:t._q(t.formData.deliveryTypeId,e.id)},on:{change:function(a){return t.$set(t.formData,"deliveryTypeId",e.id)}}}),a("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" "),0!=e.price?a("b",[t._v(t._s(e.price)+" ₽")]):a("b",[t._v("бесплатно")])])])])})),0),a("h3",{staticClass:"cart__title"},[t._v("Оплата")]),a("ul",{staticClass:"cart__options options"},t._l(t.paymentTypes,(function(e){return a("li",{key:e.id,staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.paymentTypeId,expression:"formData.paymentTypeId"}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay"},domProps:{value:e.id,checked:t._q(t.formData.paymentTypeId,e.id)},on:{change:function(a){return t.$set(t.formData,"paymentTypeId",e.id)}}}),a("span",{staticClass:"options__value"},[t._v(" "+t._s(e.title)+" ")])])])})),0)]),t.formError.paymentTypeId?a("span",{staticClass:"form__error form__error-payment-delivery"},[t._v(t._s(t.formError.paymentTypeId))]):t._e()]),a("div",{staticClass:"cart__block"},[a("OrderProductsList",{attrs:{products:t.products}}),a("div",{staticClass:"cart__total"},[a("p",[t._v("Доставка: "),1==t.formData.deliveryTypeId?a("b",[t._v("бесплатно")]):t._e(),t._v(" "),2==t.formData.deliveryTypeId?a("b",[t._v(" "+t._s(t.deliveryType[1].price)+" ₽")]):t._e()]),a("p",[t._v("Итого: "),a("b",[t._v(t._s(t.amountProducts(t.products)))]),t._v(" товара на сумму "),t.deliveryType[t.formData.deliveryTypeId-1]?a("b",[t._v(t._s(t.totalPrice+Number(t.deliveryType[t.formData.deliveryTypeId-1].price))+" ₽")]):t._e()])]),a("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"}},[t._v(" Оформить заказ ")])],1),t.formErrorMessage?a("div",{staticClass:"cart__error form__error-block"},[a("h4",[t._v("Заявка не отправлена!")]),a("p",[t._v(" Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу. ")])]):t._e()])])])},Dt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"cart.html"}},[t._v(" Корзина ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])]),a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Оформление заказа ")])])])}],wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"cart__orders"},t._l(t.products,(function(t,e){return a("OrderProductsItem",{key:e,attrs:{product:t}})})),1)},Tt=[],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cart__order"},[a("h3",[t._v(t._s(t.product.product.title))]),a("b",[t._v(t._s(t.product.product.price*t.product.amount)+" ₽")]),a("span",[t._v("Артикул: "+t._s(t.product.product.id))])])},Ot=[],At={props:["product"]},$t=At,St=Object(d["a"])($t,xt,Ot,!1,null,null,null),Et=St.exports,jt={components:{OrderProductsItem:Et},props:["products"]},Mt=jt,zt=Object(d["a"])(Mt,wt,Tt,!1,null,null,null),Ft=zt.exports,Lt={data:function(){return{formData:{paymentTypeId:1,deliveryTypeId:1},formError:{},formErrorMessage:"",orderSendLoading:!1,orderSendFailed:!1,deliveryTypes:null,paymentTypes:null}},methods:{amountProducts:function(t){var e=0;return t.forEach((function(t){e+=t.amount})),e},order:function(){var t=this;this.orderSendLoading=!0,this.orderSendFailed=!1,this.formErrorMessage="",this.formError={},I.a.post(w+"/api/orders",Object(i["a"])({},this.formData),{params:{userAccessKey:this.$store.state.userAccessKey}}).then((function(e){t.$store.commit("resetCart"),t.$store.commit("updateOrderInfo",e.data),t.$router.push({name:"orderInfo",params:{id:e.data.id}})})).catch((function(e){t.formError=e.response.data.error.request||{},t.formErrorMessage=e.response.data.error.message,t.orderSendFailed=!0})).then((function(){t.orderSendLoading=!1}))},deliveryTypeGet:function(){var t=this;I.a.get(w+"/api/deliveries").then((function(e){return t.deliveryTypes=e.data}))},paymentTypeGet:function(){var t=this;I.a.get(w+"/api/payments",{params:{deliveryTypeId:1}}).then((function(e){return t.paymentTypes=e.data}))}},computed:Object(i["a"])(Object(i["a"])({},Object(p["c"])({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})),{},{deliveryType:function(){return null!=this.deliveryTypes?this.deliveryTypes:0},paymentType:function(){return null!=this.paymentTypes?this.paymentTypes:0}}),components:{OrderProductsList:Ft},created:function(){this.deliveryTypeGet(),this.paymentTypeGet()}},Kt=Lt,Nt=Object(d["a"])(Kt,Pt,Dt,!1,null,null,null),Rt=Nt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[t._m(0),a("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),a("span",[t._v("№ "+t._s(t.getOrderInfo.id))])])]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),a("ul",{staticClass:"dictionary"},[a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.getOrderInfo.name)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.getOrderInfo.address)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.getOrderInfo.phone)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.getOrderInfo.email)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.getOrderInfo.paymentType)+" ")])])])]),a("div",{staticClass:"cart__block"},[a("ul",{staticClass:"cart__orders"},t._l(t.basketItems,(function(e,r){return a("li",{key:r,staticClass:"cart__order"},[a("h3",[t._v(t._s(e.product.title))]),a("b",[t._v(t._s(e.product.price*e.quantity)+" ₽")]),a("span",[t._v("Артикул: "+t._s(e.product.id))])])})),0),a("div",{staticClass:"cart__total"},[a("p",[t._v("Доставка: "),t.getOrderInfo.deliveryType&&1==t.getOrderInfo.deliveryType.id?a("b",[t._v("бесплатно")]):t._e(),t.getOrderInfo.deliveryType&&2==t.getOrderInfo.deliveryType.id?a("b",[t._v(t._s(t.getOrderInfo.deliveryType.price)+" ₽")]):t._e()]),a("p",[t._v("Итого: "),a("b",[t._v(t._s(t.amountProducts(t.basketItems)))]),t._v(" товара на сумму "),a("b",[t._v(t._s(t.getOrderInfo.totalPrice)+" ₽")])])])])])])])},Bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"cart.html"}},[t._v(" Корзина ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])])}],Vt={created:function(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)},computed:{getOrderInfo:function(){return this.$store.state.orderInfo},basketItems:function(){return this.getOrderInfo&&this.getOrderInfo.basket?this.getOrderInfo.basket.items:[]}},methods:{amountProducts:function(t){var e=0;return t.forEach((function(t){e+=t.quantity})),e}}},qt=Vt,Ut=Object(d["a"])(qt,Ht,Bt,!1,null,null,null),Gt=Ut.exports;r["a"].use(b["a"]);var Jt=[{path:"/",name:"main",component:Z},{path:"/product/:id",name:"product",component:dt},{path:"/cart",name:"cart",component:It},{path:"/order",name:"order",component:Rt},{path:"/order/:id",name:"orderInfo",component:Gt},{path:"*",name:"notFound",component:ot}],Qt=new b["a"]({routes:Jt}),Wt=Qt;a("7db0");r["a"].use(p["a"]);var Xt=new p["a"].Store({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],orderInfo:[]},mutations:{updateUserAccessKey:function(t,e){t.userAccessKey=e},updateCardProductsData:function(t,e){t.cartProductsData=e},syncCartProducts:function(t){t.cartProducts=t.cartProductsData.map((function(t){return{productId:t.product.id,amount:t.quantity,size:t.size,color:t.color,basketItemId:t.id}}))},updateCartProductAmount:function(t,e){var a=e.productId,r=e.amount,s=t.cartProducts.find((function(t){return t.basketItemId==a}));s&&r>0&&(s.amount=r)},resetCart:function(t){t.cartProducts=[],t.cartProductsData=[]},updateOrderInfo:function(t,e){t.orderInfo=e}},getters:{cartDetailProducts:function(t){return t.cartProducts.map((function(e){var a=t.cartProductsData.find((function(t){return t.product.id===e.productId})).product,r=a.colors.map((function(t){return t.gallery?t.gallery[0].file.url:T}));return Object(i["a"])(Object(i["a"])({},e),{},{product:Object(i["a"])(Object(i["a"])({},a),{},{image:r})})}))},cartTotalPrice:function(t,e){return e.cartDetailProducts.reduce((function(t,e){return e.product.price*e.amount+t}),0)}},actions:{loadCart:function(t){return I.a.get(w+"/api/baskets",{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCardProductsData",e.data.items),t.commit("syncCartProducts")}))},addProductToCart:function(t,e){var a=e.productId,r=e.color,s=e.size,o=e.amount;return I.a.post(w+"/api/baskets/products",{productId:a,colorId:r,sizeId:s,quantity:o},{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateCardProductsData",e.data.items),t.commit("syncCartProducts")}))},updateCartProductAmount:function(t,e){var a=e.productId,r=e.amount;if(t.commit("updateCartProductAmount",{productId:a,amount:r}),!(r<1))return I.a.put(w+"/api/baskets/products",{basketItemId:a,quantity:r},{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateCardProductsData",e.data.items)})).catch((function(){t.commit("syncCartProducts")}))},deleteCartProduct:function(t,e){var a=e.basketItemId;I.a.delete(w+"/api/baskets/products",{params:{userAccessKey:t.state.userAccessKey},data:{basketItemId:a}}).then((function(e){t.commit("updateCardProductsData",e.data.items),t.commit("syncCartProducts")}))},loadOrderInfo:function(t,e){return I.a.get(w+"/api/orders/"+e,{params:{userAccessKey:t.state.userAccessKey}}).then((function(e){t.commit("updateOrderInfo",e.data)}))}}});r["a"].config.productionTip=!1,new r["a"]({router:Wt,store:Xt,render:function(t){return t(C)}}).$mount("#app")}});
//# sourceMappingURL=app.c33595b3.js.map